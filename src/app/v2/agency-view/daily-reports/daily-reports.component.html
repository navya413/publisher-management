
<div mat-dialog-title class="dialog-header" style="padding: 10px 20px;margin: 0px;">
  <span>Daily Reports</span>
  <i class="material-icons float-right my-1 cursor" (click)="close()">
    close
  </i>
</div>

<div mat-dialog-content style="padding: 10px 20px;margin: 0px;">

  <m-table
    [value]="totalResp.data"
    [selectable]="false" [selectionMode]="'single'"
  >
    <m-header>
      <ng-template let-header>
        <div class="card-header">
          <button mat-icon-button (click)="export()" style="margin-left: auto;">
            <mat-icon style="color: #797979">file_download</mat-icon>
          </button>
        </div>
      </ng-template>
    </m-header>

    <m-footer [paginator]="true" [pageSize]="5"></m-footer>

    <m-column field="name" header="Date" >
      <ng-template let-col let-row="row" mTemplate="body">
        <span class="cursor">{{ row.date }}</span>
      </ng-template>
    </m-column>

    <!-- Joveo clicks -->
    <m-column
     [field]="'clicks'"
     [sortable]="false">
        <ng-template mTemplate="header">
          <span>Joveo</span>
          <br>
          <span class="sub-header">Clicks</span>
        </ng-template>
        <ng-template let-col let-row="row" mTemplate="body">
          {{ row["clicks"].toLocaleString() }}
        </ng-template>
    </m-column>

    <!-- Total clicks -->
    <m-column
     [field]="'allClicks'"
     [sortable]="false">
        <ng-template mTemplate="header">
          <span>Total</span>
          <br>
          <span class="sub-header">Clicks</span>
        </ng-template>
        <ng-template let-col let-row="row" mTemplate="body">
          {{ row["allClicks"].toLocaleString() }}
        </ng-template>
    </m-column>

    <!-- Joveo Applies -->
    <m-column
     [field]="'applies'"
     [sortable]="false">
        <ng-template mTemplate="header">
          <span>Joveo</span>
          <br>
          <span class="sub-header">Applies</span>
        </ng-template>
        <ng-template let-col let-row="row" mTemplate="body">
          {{ row["applies"].toLocaleString() }}
        </ng-template>
    </m-column>

    <!-- Total Applies -->
    <m-column
     [field]="'clicks.total'"
     [sortable]="false">
        <ng-template mTemplate="header">
          <span>Total</span>
          <br>
          <span class="sub-header">Applies</span>
        </ng-template>
        <ng-template let-col let-row="row" mTemplate="body">
          {{ row["allApplies"].toLocaleString() }}
        </ng-template>
    </m-column>

      <!-- Joveo cta% -->
      <m-column
      [field]="'cta'"
      [sortable]="false">
         <ng-template mTemplate="header">
           <span>Joveo</span>
           <br>
           <span class="sub-header">CTA</span>
         </ng-template>
         <ng-template let-col let-row="row" mTemplate="body">
           {{ row["cta"]?.toLocaleString() }}
         </ng-template>
     </m-column>

     <!-- Total cta% -->
     <m-column
     [field]="'cta'"
     [sortable]="false">
        <ng-template mTemplate="header">
          <span>Total</span>
          <br>
          <span class="sub-header">CTA</span>
        </ng-template>
        <ng-template let-col let-row="row" mTemplate="body">
          {{ row["allCta"]?.toLocaleString() }}
        </ng-template>
    </m-column>

    <m-column field="spend" header="Spend" >
        <ng-template let-col let-row="row" mTemplate="body">
          <span class="cursor">{{ row.spent | numberFormatter:'currency'}}</span>
        </ng-template>
    </m-column>

    <m-column field="cpc" header="CPC" >
        <ng-template let-col let-row="row" mTemplate="body">
          <span class="cursor">{{ row.cpc | numberFormatter:'currency' }}</span>
        </ng-template>
    </m-column>


    <m-column field="cpa" header="CPA" >
        <ng-template let-col let-row="row" mTemplate="body">
          <span class="cursor">{{ row.cpa | numberFormatter:'currency' }}</span>
        </ng-template>
    </m-column>

    <m-column field="cph" header="CPH" >
        <ng-template let-col let-row="row" mTemplate="body">
          <span class="cursor">{{ row.cph | numberFormatter:'currency'}}</span>
        </ng-template>
    </m-column>

    <!-- Joveo ath% -->
    <m-column
    [field]="'ath'"
    [sortable]="false">
       <ng-template mTemplate="header">
         <span>Joveo</span>
         <br>
         <span class="sub-header">ATH%</span>
       </ng-template>
       <ng-template let-col let-row="row" mTemplate="body">
         {{ row["ath"]?.toLocaleString() }}
       </ng-template>
   </m-column>

    <!-- Total ath% -->
    <m-column
    [field]="'allAth'"
    [sortable]="false">
       <ng-template mTemplate="header">
         <span>Total</span>
         <br>
         <span class="sub-header">ATH%</span>
       </ng-template>
       <ng-template let-col let-row="row" mTemplate="body">
         {{ row["allAth"]?.toLocaleString() }}
       </ng-template>
   </m-column>

    

    <ng-template mTemplate="emptyTable">
      <div *ngIf="loading" class="table-loading">
        <mat-progress-bar mode="indeterminate"></mat-progress-bar>
        <div>Loading...</div>
      </div>
      
      <div *ngIf="!loading">
        <div class="alert alert-primary ma-4">No records found.</div>
      </div>
    </ng-template>
  </m-table>

</div>